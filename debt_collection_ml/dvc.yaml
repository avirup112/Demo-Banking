# Enhanced DVC Pipeline for Debt Collection ML
# Repository: avirup112/Demo-Banking

stages:
  data_generation:
    cmd: python src/data/data_generator.py --output data/raw/synthetic_debt_data.csv --size 10000
    deps:
    - src/data/data_generator.py
    outs:
    - data/raw/synthetic_debt_data.csv
    
  data_preprocessing:
    cmd: python src/data/data_preprocessor.py --input data/raw/synthetic_debt_data.csv --output data/processed/
    deps:
    - src/data/data_preprocessor.py
    - data/raw/synthetic_debt_data.csv
    outs:
    - data/processed/X_train.npy
    - data/processed/X_test.npy
    - data/processed/y_train.npy
    - data/processed/y_test.npy
    
  feature_engineering:
    cmd: python src/features/feature_engineering.py --input data/processed/ --output data/features/
    deps:
    - src/features/feature_engineering.py
    - data/processed/X_train.npy
    - data/processed/X_test.npy
    outs:
    - data/features/X_train_features.npy
    - data/features/X_test_features.npy
    
  complete_pipeline:
    cmd: python run_complete_pipeline.py --samples 10000 --dagshub-owner avirup112 --dagshub-repo Demo-Banking --dashboard-timeout 180 --no-browser
    deps:
    - run_complete_pipeline.py
    - run_enhanced_pipeline.py
    - streamlit_dashboard.py
    - src/data/data_generator.py
    - src/data/data_preprocessor.py
    - src/features/feature_engineering.py
    - src/explainability/shap_explainer.py
    - src/utils/dagshub_integration.py
    outs:
    - models/trained/
    - models/artifacts/
    - reports/model_comparison.csv
    - explanations/
    metrics:
    - reports/metrics.json